{"ast":null,"code":"var _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nvar usuario = require(\"../modal/Usuario\");\n\nexports.reenviar = function _callee(email, alert, origin) {\n  var mensagem;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          if (!(origin == \"cadastrar\")) {\n            _context.next = 6;\n            break;\n          }\n\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(usuario.cadastrarEmail(email));\n\n        case 3:\n          _context.t0 = _context.sent;\n          _context.next = 9;\n          break;\n\n        case 6:\n          _context.next = 8;\n          return _regeneratorRuntime.awrap(usuario.verificarEmail(email));\n\n        case 8:\n          _context.t0 = _context.sent;\n\n        case 9:\n          mensagem = _context.t0;\n          console.log(mensagem);\n          alert(\"Sucesso\", \"Email reenviado com sucesso\");\n\n        case 12:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nexports.confirmarEmail = function _callee2(email, code, setErros, nav, origin, storage) {\n  var retorno, mensagemErro, erros;\n  return _regeneratorRuntime.async(function _callee2$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return _regeneratorRuntime.awrap(usuario.confirmarEmail(email, code));\n\n        case 2:\n          retorno = _context2.sent;\n\n          if (!(retorno.refreshToken != undefined && retorno.token != undefined)) {\n            _context2.next = 13;\n            break;\n          }\n\n          _context2.next = 6;\n          return _regeneratorRuntime.awrap(storage.setItem(\"@refreshToken\", retorno.refreshToken));\n\n        case 6:\n          _context2.next = 8;\n          return _regeneratorRuntime.awrap(storage.setItem(\"@token\", retorno.token));\n\n        case 8:\n          _context2.next = 10;\n          return _regeneratorRuntime.awrap(storage.setItem(\"@email\", email));\n\n        case 10:\n          nav.navigate(origin == \"cadastrar\" ? \"finalizarCadastro\" : \"main\", {\n            \"refreshToken\": retorno.refreshToken,\n            \"token\": retorno.token,\n            \"email\": email\n          });\n          _context2.next = 18;\n          break;\n\n        case 13:\n          mensagemErro = \"\";\n          mensagemErro += retorno.message != undefined ? retorno.message : \"\";\n\n          if (retorno.erros != undefined) {\n            erros = JSON.parse(\"[\" + JSON.stringify(retorno.erros).split(\"[\").join(\"\").split(\"]\").join(\"\") + \"]\");\n            mensagemErro += erros.map(function (erro) {\n              return erro + \"\\n\";\n            });\n          }\n\n          _context2.next = 18;\n          return _regeneratorRuntime.awrap(setErros(mensagemErro));\n\n        case 18:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};","map":{"version":3,"names":["usuario","require","exports","reenviar","email","alert","origin","cadastrarEmail","verificarEmail","mensagem","console","log","confirmarEmail","code","setErros","nav","storage","retorno","refreshToken","undefined","token","setItem","navigate","mensagemErro","message","erros","JSON","parse","stringify","split","join","map","erro"],"sources":["C:/Users/ROBSONLUCASSILVEIRAM/Documents/tcc/src/controllers/confirmarEmail.js"],"sourcesContent":["const usuario = require('../modal/Usuario')\r\n\r\n \r\n\r\nexports.reenviar = async (email, alert, origin) =>{\r\n    let mensagem = origin == \"cadastrar\" ? await usuario.cadastrarEmail(email) : await usuario.verificarEmail(email);\r\n    console.log(mensagem);\r\n    alert(\"Sucesso\",\"Email reenviado com sucesso\");\r\n}\r\n\r\nexports.confirmarEmail = async (email, code, setErros, nav, origin, storage) =>{\r\n    let retorno =  await usuario.confirmarEmail(email, code)\r\n    if(retorno.refreshToken != undefined && retorno.token != undefined){\r\n        await storage.setItem(\"@refreshToken\", retorno.refreshToken);\r\n        await storage.setItem(\"@token\", retorno.token);\r\n        await storage.setItem(\"@email\", email);\r\n        nav.navigate(origin == \"cadastrar\" ? \"finalizarCadastro\" :  \"main\", {\r\n            \"refreshToken\"  : retorno.refreshToken,\r\n            \"token\"         : retorno.token,\r\n            \"email\"         : email\r\n        })\r\n    }\r\n    else{\r\n        let mensagemErro = \"\";\r\n        mensagemErro += retorno.message != undefined ? retorno.message : \"\";\r\n        if(retorno.erros != undefined){\r\n            let erros = JSON.parse(`[${JSON.stringify(retorno.erros).split(\"[\").join(\"\").split(\"]\").join(\"\")}]`)\r\n            mensagemErro += erros.map(erro =>{\r\n                return `${erro}\\n`\r\n            })\r\n        }\r\n        await setErros(mensagemErro)\r\n    }\r\n}"],"mappings":";;AAAA,IAAMA,OAAO,GAAGC,OAAO,oBAAvB;;AAIAC,OAAO,CAACC,QAAR,GAAmB,iBAAOC,KAAP,EAAcC,KAAd,EAAqBC,MAArB;EAAA;EAAA;IAAA;MAAA;QAAA;UAAA,MACAA,MAAM,IAAI,WADV;YAAA;YAAA;UAAA;;UAAA;UAAA,iCAC8BN,OAAO,CAACO,cAAR,CAAuBH,KAAvB,CAD9B;;QAAA;UAAA;UAAA;UAAA;;QAAA;UAAA;UAAA,iCACoEJ,OAAO,CAACQ,cAAR,CAAuBJ,KAAvB,CADpE;;QAAA;UAAA;;QAAA;UACXK,QADW;UAEfC,OAAO,CAACC,GAAR,CAAYF,QAAZ;UACAJ,KAAK,CAAC,SAAD,EAAW,6BAAX,CAAL;;QAHe;QAAA;UAAA;MAAA;IAAA;EAAA;AAAA,CAAnB;;AAMAH,OAAO,CAACU,cAAR,GAAyB,kBAAOR,KAAP,EAAcS,IAAd,EAAoBC,QAApB,EAA8BC,GAA9B,EAAmCT,MAAnC,EAA2CU,OAA3C;EAAA;EAAA;IAAA;MAAA;QAAA;UAAA;UAAA,iCACAhB,OAAO,CAACY,cAAR,CAAuBR,KAAvB,EAA8BS,IAA9B,CADA;;QAAA;UACjBI,OADiB;;UAAA,MAElBA,OAAO,CAACC,YAAR,IAAwBC,SAAxB,IAAqCF,OAAO,CAACG,KAAR,IAAiBD,SAFpC;YAAA;YAAA;UAAA;;UAAA;UAAA,iCAGXH,OAAO,CAACK,OAAR,CAAgB,eAAhB,EAAiCJ,OAAO,CAACC,YAAzC,CAHW;;QAAA;UAAA;UAAA,iCAIXF,OAAO,CAACK,OAAR,CAAgB,QAAhB,EAA0BJ,OAAO,CAACG,KAAlC,CAJW;;QAAA;UAAA;UAAA,iCAKXJ,OAAO,CAACK,OAAR,CAAgB,QAAhB,EAA0BjB,KAA1B,CALW;;QAAA;UAMjBW,GAAG,CAACO,QAAJ,CAAahB,MAAM,IAAI,WAAV,GAAwB,mBAAxB,GAA+C,MAA5D,EAAoE;YAChE,gBAAkBW,OAAO,CAACC,YADsC;YAEhE,SAAkBD,OAAO,CAACG,KAFsC;YAGhE,SAAkBhB;UAH8C,CAApE;UANiB;UAAA;;QAAA;UAabmB,YAba,GAaE,EAbF;UAcjBA,YAAY,IAAIN,OAAO,CAACO,OAAR,IAAmBL,SAAnB,GAA+BF,OAAO,CAACO,OAAvC,GAAiD,EAAjE;;UACA,IAAGP,OAAO,CAACQ,KAAR,IAAiBN,SAApB,EAA8B;YACtBM,KADsB,GACdC,IAAI,CAACC,KAAL,OAAeD,IAAI,CAACE,SAAL,CAAeX,OAAO,CAACQ,KAAvB,EAA8BI,KAA9B,CAAoC,GAApC,EAAyCC,IAAzC,CAA8C,EAA9C,EAAkDD,KAAlD,CAAwD,GAAxD,EAA6DC,IAA7D,CAAkE,EAAlE,CAAf,OADc;YAE1BP,YAAY,IAAIE,KAAK,CAACM,GAAN,CAAU,UAAAC,IAAI,EAAG;cAC7B,OAAUA,IAAV;YACH,CAFe,CAAhB;UAGH;;UApBgB;UAAA,iCAqBXlB,QAAQ,CAACS,YAAD,CArBG;;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA;AAAA,CAAzB"},"metadata":{},"sourceType":"script"}