{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport * as React from 'react';\nimport { useState, useEffect } from \"react\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport style from \"./css/criarTrajeto\";\nimport Navbar from \"./components/navbar\";\nimport TrajetoCriado from \"./modal/trajetoCriado\";\nimport MapView from 'react-native-maps';\nimport { Marker } from 'react-native-maps';\nimport * as Location from 'expo-location';\nimport controller from \"./../controllers/criarTrajeto\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nfunction Main(_ref) {\n  var navigation = _ref.navigation;\n  var regiao = {\n    latitude: -23.9660408,\n    longitude: -46.3041324,\n    latitudeDelta: 0.0922,\n    longitudeDelta: 0.0421\n  };\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      location = _useState2[0],\n      setLocation = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      errorMsg = _useState4[0],\n      setErrorMsg = _useState4[1];\n\n  useEffect(function () {\n    (function _callee() {\n      var _await$Location$reque, status, location;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(Location.requestForegroundPermissionsAsync());\n\n            case 2:\n              _await$Location$reque = _context.sent;\n              status = _await$Location$reque.status;\n\n              if (!(status !== 'granted')) {\n                _context.next = 7;\n                break;\n              }\n\n              setErrorMsg('Permission to access location was denied');\n              return _context.abrupt(\"return\");\n\n            case 7:\n              _context.next = 9;\n              return _regeneratorRuntime.awrap(Location.getCurrentPositionAsync({}));\n\n            case 9:\n              location = _context.sent;\n              setLocation(location);\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, []);\n\n  if (errorMsg) {\n    console.log(errorMsg);\n  } else if (location) {\n    regiao = {\n      latitude: location.coords.latitude,\n      longitude: location.coords.longitude,\n      latitudeDelta: 0.0922,\n      longitudeDelta: 0.0421\n    };\n  }\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      inBatimetria = _useState6[0],\n      setInBatimetria = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      pontoIndex = _useState8[0],\n      changePontoIndex = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      markers = _useState10[0],\n      setMarkers = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      markersCoordinates = _useState12[0],\n      setMarkersCoordinates = _useState12[1];\n\n  var _useState13 = useState(\"Colocar primeiro ponto\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      txtBtnCriarPonto = _useState14[0],\n      setTxtBtnCriarPonto = _useState14[1];\n\n  var nomesPonto = [\"primeiro\", \"segundo\", \"terceiro\", \"quarto\"];\n\n  var setMarker = function setMarker() {\n    if (pontoIndex < 4) {\n      changePontoIndex(pontoIndex + 1);\n      var marks = markers;\n      var marksCdnts = markersCoordinates;\n      marksCdnts.push(regiao);\n      marks.push(_jsx(Marker, {\n        coordinate: {\n          latitude: regiao.latitude,\n          longitude: regiao.longitude\n        },\n        image: require(\"../../assets/map64px.png\")\n      }));\n      setMarkers(marks);\n      setMarkersCoordinates(marksCdnts);\n      pontoIndex + 1 < 4 ? setTxtBtnCriarPonto(\"Colocar \" + nomesPonto[pontoIndex + 1] + \" ponto\") : setTxtBtnCriarPonto(\"Cadastrar Trajeto\");\n    } else {\n      controller.criarTrajeto(markersCoordinates, navigation, AsyncStorage, Alert);\n    }\n  };\n\n  var removeLastMarker = function removeLastMarker() {\n    if (pontoIndex >= 0) {\n      changePontoIndex(pontoIndex - 1);\n      var marks = markers;\n      var marksCdnts = markersCoordinates;\n      marks.pop();\n      marksCdnts.pop();\n      setMarkersCoordinates(marksCdnts);\n      setMarkers(marks);\n      pontoIndex - 1 >= 0 ? setTxtBtnCriarPonto(\"Colocar \" + nomesPonto[pontoIndex - 1] + \" ponto\") : null;\n    }\n  };\n\n  return _jsxs(View, {\n    style: [],\n    children: [_jsx(TrajetoCriado, {}), _jsxs(View, {\n      style: [style.header],\n      children: [_jsx(View, {\n        style: style.circle\n      }), _jsx(Text, {\n        style: style.lblAgora,\n        children: \"Agora\"\n      })]\n    }), _jsxs(View, {\n      style: [style.main, style.centerAll],\n      children: [_jsxs(MapView, {\n        style: style.map,\n        region: regiao,\n        onRegionChangeComplete: function onRegionChangeComplete(val) {\n          regiao = val;\n        },\n        children: [markers[0], markers[1], markers[2], markers[3]]\n      }), _jsx(View, {\n        style: [style.containerMarker, style.map],\n        children: _jsx(Image, {\n          style: style.marker,\n          source: require(\"../../assets/map.png\")\n        })\n      }), _jsx(View, {\n        children: _jsx(TextInput, {\n          style: style.txtPesquisar,\n          placeholder: \"Ex: Porto de Santos\",\n          value: \"\"\n        })\n      }), _jsx(Text, {\n        style: style.disclaimerTrajeto,\n        children: \"Escolha quatro pontos no mapa para fazer a batimetria, basta clicar no mapa\"\n      }), _jsx(View, {\n        style: style.containerMain,\n        children: _jsxs(View, {\n          style: style.pnlControleBatimetria,\n          children: [_jsx(TouchableHighlight, {\n            style: [style.btnBatimentria, pontoIndex == 0 ? style.btnDisabled : null],\n            onPress: removeLastMarker,\n            children: _jsx(Text, {\n              style: style.lblBatimetria,\n              children: \"Remover ponto atual\"\n            })\n          }), _jsx(TouchableHighlight, {\n            style: style.btnBatimentria,\n            onPress: setMarker,\n            children: _jsx(Text, {\n              style: style.lblBatimetria,\n              children: txtBtnCriarPonto\n            })\n          })]\n        })\n      })]\n    }), _jsx(View, {\n      style: [style.footer],\n      children: _jsx(Navbar, {\n        nav: navigation,\n        screen: \"Dados\"\n      })\n    })]\n  });\n}\n\nexport default Main;","map":{"version":3,"names":["React","useState","useEffect","style","Navbar","TrajetoCriado","MapView","Marker","Location","controller","AsyncStorage","Main","navigation","regiao","latitude","longitude","latitudeDelta","longitudeDelta","location","setLocation","errorMsg","setErrorMsg","requestForegroundPermissionsAsync","status","getCurrentPositionAsync","console","log","coords","inBatimetria","setInBatimetria","pontoIndex","changePontoIndex","markers","setMarkers","markersCoordinates","setMarkersCoordinates","txtBtnCriarPonto","setTxtBtnCriarPonto","nomesPonto","setMarker","marks","marksCdnts","push","require","criarTrajeto","Alert","removeLastMarker","pop","header","circle","lblAgora","main","centerAll","map","val","containerMarker","marker","txtPesquisar","disclaimerTrajeto","containerMain","pnlControleBatimetria","btnBatimentria","btnDisabled","lblBatimetria","footer"],"sources":["C:/Users/ROBSONLUCASSILVEIRAM/Documents/tcc/src/views/criarTrajeto.js"],"sourcesContent":["import * as React from 'react';\nimport { useState, useEffect } from \"react\";\nimport { Text, View,TextInput, Alert, Image, TouchableHighlight } from 'react-native';\nimport style from './css/criarTrajeto'\nimport Navbar from './components/navbar';\nimport TrajetoCriado from './modal/trajetoCriado'\nimport MapView from 'react-native-maps';\nimport { Marker } from 'react-native-maps';\nimport * as Location from 'expo-location';\nimport controller from './../controllers/criarTrajeto'\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nfunction Main({navigation}){\n\n  var regiao = {\n    latitude: -23.9660408,\n    longitude: -46.3041324,\n    latitudeDelta: 0.0922,\n    longitudeDelta: 0.0421,\n  };\n  const [location, setLocation] = useState(null);\n  const [errorMsg, setErrorMsg] = useState(null);\n\n  useEffect(() => {\n    (async () => {\n      let { status } = await Location.requestForegroundPermissionsAsync();\n      if (status !== 'granted') {\n        setErrorMsg('Permission to access location was denied');\n        return;\n      }\n\n      let location = await Location.getCurrentPositionAsync({});\n      setLocation(location);\n    })();\n  }, []);\n\n\n  if (errorMsg) {\n    console.log(errorMsg);\n  } else if (location) {\n    regiao = {\n      latitude: location.coords.latitude,\n      longitude: location.coords.longitude,\n      latitudeDelta: 0.0922,\n      longitudeDelta: 0.0421,\n    };\n  }\n  const [inBatimetria, setInBatimetria] = useState(false);\n\n  const [pontoIndex, changePontoIndex] = useState(0);\n  const [markers, setMarkers] = useState([]);\n  const [markersCoordinates, setMarkersCoordinates] = useState([]);\n  const [txtBtnCriarPonto, setTxtBtnCriarPonto] = useState(\"Colocar primeiro ponto\");\n  const nomesPonto = [\"primeiro\", \"segundo\", \"terceiro\", \"quarto\"];\n  var setMarker = () =>{\n    if(pontoIndex < 4){\n      changePontoIndex(pontoIndex + 1);\n      let marks = markers;    \n      let marksCdnts = markersCoordinates;    \n      marksCdnts.push(regiao);\n      marks.push((\n        <Marker\n          coordinate={{ latitude: regiao.latitude, longitude: regiao.longitude}}\n          image={require(\"../../assets/map64px.png\")}\n        />\n      ));\n      setMarkers(marks);\n      setMarkersCoordinates(marksCdnts);\n      pontoIndex + 1 < 4 ? setTxtBtnCriarPonto(`Colocar ${nomesPonto[pontoIndex+1]} ponto`) : setTxtBtnCriarPonto(\"Cadastrar Trajeto\")\n    }\n    else{\n      controller.criarTrajeto(markersCoordinates, navigation, AsyncStorage, Alert)\n    }\n  }\n  var removeLastMarker = () =>{\n    if(pontoIndex >= 0){\n      changePontoIndex(pontoIndex - 1);\n      let marks = markers;    \n      let marksCdnts = markersCoordinates;    \n      marks.pop();\n      marksCdnts.pop();\n      setMarkersCoordinates(marksCdnts);\n      setMarkers(marks);\n      pontoIndex -1 >= 0 ? setTxtBtnCriarPonto(`Colocar ${nomesPonto[pontoIndex-1]} ponto`) : null\n    }\n    \n  }\n    return(\n  <View style={[]}> \n    <TrajetoCriado/>\n    <View style={[style.header]}> \n      <View style={style.circle}></View>\n      <Text style={style.lblAgora}>Agora</Text>\n    </View>\n    <View style={[style.main, style.centerAll]}> \n    \n    <MapView \n      style={style.map} \n      region={regiao}\n      onRegionChangeComplete={val =>{regiao = val}}\n      > \n      {markers[0]}\n      {markers[1]}\n      {markers[2]}\n      {markers[3]}\n      </MapView>\n      <View style={[style.containerMarker, style.map]}>\n        <Image\n            style={style.marker}\n            source={require(\"../../assets/map.png\")}\n          />\n      </View>\n      <View>\n        <TextInput \n          style={style.txtPesquisar} \n          placeholder=\"Ex: Porto de Santos\"\n          value=\"\">\n        </TextInput>\n      </View>\n      <Text style={style.disclaimerTrajeto}>\n          Escolha quatro pontos no mapa para fazer a batimetria, basta clicar no mapa \n      </Text>\n      <View style={style.containerMain}>\n        <View style={style.pnlControleBatimetria}>\n          <TouchableHighlight style={[style.btnBatimentria, pontoIndex == 0 ? style.btnDisabled: null]} onPress={removeLastMarker}>\n            <Text style={style.lblBatimetria}>Remover ponto atual</Text>\n          </TouchableHighlight>\n          <TouchableHighlight style={style.btnBatimentria} onPress={setMarker}>\n            <Text style={style.lblBatimetria}>{txtBtnCriarPonto}</Text>\n          </TouchableHighlight>\n        </View>\n        \n      </View>\n\n    </View>\n    <View style={[style.footer]}> \n      <Navbar nav={navigation} screen=\"Dados\" />\n    </View>\n\n  </View>\n  )\n}\n\n\n\nexport default Main"],"mappings":"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"},"metadata":{},"sourceType":"module"}